{% extends 'base.html' %} 

{% block content %}

{% set is_edit = product is defined %}
{% set action_url = url_for('products.edit_product', product_id=product._id) if is_edit else url_for('products.addproduct') %}
{% set form_title = 'EDITAR LICOR: ' + product.name if is_edit else 'INGRESAR NUEVO LICOR ü•É' %}
{% set button_text = 'Guardar Cambios' if is_edit else 'Guardar Licor' %}


<div class="mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card text-white">
                <div class="card-header">
                    <h5 class="text-center">{{ form_title }}</h5>
                </div>
                <div class="card-body">
                    
                    <form action="{{ action_url }}" method="POST">

                        <label>Nombre</label>
                        <input type="text" class="form-control mb-3" name="name" 
                            value="{{ product.name if is_edit else '' }}" required>

                        <label>Descripci√≥n</label>
                        <textarea class="form-control mb-3" name="description" rows="2" required>
                            {{ product.description if is_edit else '' }}
                        </textarea>

                        <label>Categor√≠a</label>
                        <select class="form-control mb-3" name="category" required>
                            {% set current_category = product.category if is_edit else '' %}
                            <option value="">Seleccione Categor√≠a</option>
                            <option value="Ron" {% if current_category == 'Ron' %}selected{% endif %}>Ron</option>
                            <option value="Vodka" {% if current_category == 'Vodka' %}selected{% endif %}>Vodka</option>
                            <option value="Whisky" {% if current_category == 'Whisky' %}selected{% endif %}>Whisky</option>
                            <option value="Cerveza" {% if current_category == 'Cerveza' %}selected{% endif %}>Cerveza</option>
                            <option value="Otro" {% if current_category == 'Otro' %}selected{% endif %}>Otro</option>
                        </select>

                        <label>Precio ($)</label>
                        <input type="number" step="0.01" class="form-control mb-3" name="price" 
                            value="{{ product.price if is_edit else '' }}" required>
                        
                        <label>Stock (Cantidad)</label>
                        <input type="number" class="form-control mb-3" name="stock" 
                            value="{{ product.stock if is_edit else '' }}" required>
                        
                        <label>URL de Imagen</label>
                        <input type="url" class="form-control mb-3" name="image" 
                            value="{{ product.image if is_edit else '' }}" required>

                        <button class="btn btn-primary me-2" type="submit">{{ button_text }}</button>
                        
                        <a href="{{ url_for('products.product_list') }}" class="btn btn-secondary">Cancelar</a>
                        
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}